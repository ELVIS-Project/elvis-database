{% extends "base.html" %}

{% block wrap %}

<div class="row">
    <h2>{{ content.title }}</h2>
    <p><span class="label label-primary">Movement</span> Created by {{ content.creator.full_name }} on {{ content.created }} Last updated {{ content.updated }}</p>
    <p>Comments: {% autoescape off %}{{ content.comment }}{% endautoescape %}</p>
    <!-- {% include "includes/download-badge-inc.html" with download_type="movement" download_item_id=content.item_id title="Download Movement" %} -->
</div>

<div class="row">
    <dl class="dl-horizontal">
        <dt>Composer</dt>
        <dd><a href="{{ content.composer.url }}">{{ content.composer.name }}</a></dd>
        <dt>Date of Composition</dt>
        <dd>{{ content.date_of_composition }}</dd>
        <dt>Corpus</dt>
        <dd><a href="{{content.corpus.url}}">{{ content.corpus.title }}</a></dd>
        <dt>Number of voices:</dt>
        <dd>{{content.number_of_voices}}</dd>
        {% if content.piece %}
        <dt>Piece</dt>
        <dd><a href="{{content.piece.url}}">{{content.piece.title}}</a></dd>
        {% endif %}
        <dt>Tags</dt>
        <dd>
            {% for tag in content.tags %}
                <a href="{{ tag.url }}">{{ tag.name }}; </a>
            {% endfor %}
        </dd>
    </dl>

        {% if content.attachments %}
        <h3>Available Attachments</h3>
        <table class="table table-condensed">
        <!-- Attachments & Form -->
        <form id="patch-download-form" action="/patchdownloads/" method="post">
        {% csrf_token %}
        <dd>
                <tr>
                    <th>Add to Downloads</th>
                    <th>Filename and Format</th>
                </tr>
                {% for attachment in content.attachments %}
                <tr>
                    <td>
                        <!-- LM: Having the strangest problems with accessing the id of attachment -->
                    <input type="checkbox" name="a_ids" value="{{ attachment.id }}" checked="true">
                    </td>
                    <td>
                    <li><a href="{{ attachment.attachment }}">{{ attachment.file_name | default:"Download" }}</a></li>
                    </td>   
                </tr>
                {% endfor %}

        </dd>
        </table>
        <input type="hidden" name="this_url" value="{{ content.url }}" />
        <button type="submit" class="btn btn-default btn-sm">
         Add Selected to Downloads
            <span class="glyphicon glyphicon-plus"></span> 
        </button>
        </form> 
        
        {% endif %}
    
</div>
{% endblock %}