{% extends "base.html" %}

{% block wrap %}
<!--
<div class="col-md-8">
    <form id="search-form" action="/search" method="get">
        <input type="text" name="q" class="search-input" />
        <button type="submit" class="btn">Search</button>
    </form> 
-->

   
<form id="search-form" action="/search" method="get">

<div class="col-md-10">

  <!-- Query Entry -->
   <div class="form-group"> 
      
        <input type="text" name="q" class="search-input" placeholder="Search Query" />
     
  <!-- Button -->
    <button type="submit" class="btn btn-default btn-sm">
      Search
      <span class="glyphicon glyphicon-search"></span> 
    </button>
  </div>



  <!-- Search Options -->
  <div class="panel-group" id="accordion">
  <div class="panel panel-default">
    <div class="panel-heading">
        <h1 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne"> Advanced Search Options: </a>
        </h1>
    </div>
    <div id="collapseOne" class="panel-collapse collapse">
      <div class="panel-body">
        <div class="form-group">
          <div class="col-sm-10">
          <!-- Checkbox Filters -->
          <h4> Filter by type: </h4>
          <div class="col-sm-4">
            <div class="checkbox">
              <label>
                <input type="checkbox" name="fcp" value=""> Composers
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" name="fp" value=""> Pieces
              </label>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="checkbox">
              <label>
                <input type="checkbox" name="fm" value=""> Movements
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" name="fcr" value=""> Corpora
              </label>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="checkbox">
              <label>
                <input type="checkbox" name="ft" value=""> Tags
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" name="fu" value=""> Users
              </label>
            </div>
          </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  </div> 


</form> 


    {% if content %}
            <h3>Results</h3>
            {% include "search/search_results.html" %}
    {% endif %}
</div>

<!-- <div class="col-md-4" >
    {% if content.facets %}
        <h2>Search Facets</h2>
        {% for name, facets in content.facets.facet_fields.items %}
        <div class="row">
            <h4>{{ name }}</h4>
            <ul>
                {% for facet, count in facets.items %}
                    <li><a class="facet-link" href="#" data-facet-name="{{ name }}" data-facet-value="{{ facet }}">{{ facet }} </a> ({{ count }})</li>
                {% endfor %}
            </ul>
        </div>
        {% endfor %}
        <script type="text/javascript">
            // this code manages what happens when a facet link is clicked.
            $(".facet-link").on('click', function(event)
            {
                var qstr = window.location.search.replace("?", "");
                var qstr_params = $.parseParams(qstr);

                var facetName = $(this).data('facet-name');
                var facetValue = $(this).data('facet-value');
                if (!(facetName in qstr_params))
                {
                    var facetQ = facetName + "=" + facetValue;
                    if (qstr != "")
                    {
                        // this makes sure that we either append the 
                        // querystring to an existing query string
                        // (with a "&") or we just append it to the
                        // existing URL.
                        facetQ = "&" + facetQ;
                    }

                    window.location.search = qstr + facetQ;
                }
                event.preventDefault();
            });
        </script>
    {% endif %} -->
</div>

{% endblock %}
