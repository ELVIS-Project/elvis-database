{% extends "base.html" %}
{% load rest_framework %}
{% load filter_methods %}

{% block wrap %}

<style type="text/css">

#main-result-frame {
	-moz-box-shadow: 0 0 5px #888;
	-webkit-box-shadow: 0 0 5px#888;
	box-shadow: 0 0 5px #888;
	margin-left:50px;
	margin-right:50px;
	margin-top:20px;
	background-color: #FFFFFF;
}

.upload-data {
	color:#808080;
	font-weight:bold;
	margin-top:10px;
}

.title {
	font-size:2.3em;
}

.pic {
	height:80px;
	width:140px;
	overflow:hidden;
}

#header {
	margin-top:20px;
}
#check {
	margin-right:3px;
	margin-bottom:5px;
}

#submit-row {
	margin-top:50px;
	text-align:center;
}

.edit {
	margin-top:4px;
}

.edit,.delete {
	font-size:.9em;
	text-decoration:underline;
}
.icon-pencil,.icon-remove {
	margin-right:3px;
}

/*
.dostuff {
    border: .3em solid #FFFFFF;
    height: 4em;
    width: 5em;
    text-align: center;
    background:#FFFFFF;
    -moz-box-shadow: 0 0 5px #888;
	-webkit-box-shadow: 0 0 5px#888;
	box-shadow: 0 0 5px #888;
}*/

.dostuff {
    border: .3em solid #FFFFFF;
    height: 4em;
    width: 8em;
    text-align: center;
    background:#E0FFFF;
    -moz-box-shadow: 0 0 5px #888;
    -webkit-box-shadow: 0 0 5px#888;
    box-shadow: 0 0 5px #888;
}

table {
	margin: 0 auto;
}
span {
	margin-left:2px;
	margin-right:2px;
}

</style>

<script type="text/javascript">

var labels = ["label", "label label-success", "label label-warning", "label label-important", "label label-info", "label label-inverse"]

function randomLabel() {
	return labels[Math.floor(Math.random() * labels.length)];
}

</script>

<div class="container-fluid" id="main-result-frame">

<div class="row-fluid" id="header">
	<div class="span2">
		<img class="pic" src="{{MEDIA_URL}}{{content.composer.picture}}" alt="pic"/> 
	</div>
	<div class="span8">
		<div class="title">{{content.title}}</div>
		<div class="upload-data">uploaded by <a href="/userprofiles/{{content.uploader.id}}">{{content.uploader}}</a> on {{content.created}}</div>
	</div>
	<div class="span2">
		<div class="dostuff">
			<div class="edit"><i class="icon-pencil"></i>edit</div>
			<div class="delete"><i class="icon-remove"></i>delete</div>
		</div>
	</div>
</div>
<br>
<div class="row-fluid">
	<div class="span4">
	<b>Composer:</b> <a href="/composers/{{content.composer.id}}">{{content.composer}}</a><br>
	<b>Date of composition:</b> {{content.date_of_composition}} <br>
	<b>Corpus:</b> <a href="/corpora/{{content.corpus.id}}">{{content.corpus}}</a><br>
	<b>Number of voices:</b> {{content.number_of_voices}}<br>
	</div>
	<div class="span4">
	<b>Number of downloads:</b>{% if content.number_of_downloads %} {{content.number_of_downloads}}  {% else %} 0 {% endif %} <br>
	<b>Number of queries:</b>{% if content.number_of_queries %} {{content.number_of_queries}} {% else %} 0 {% endif %} <br>
	<b>Comment:</b> {% if content.comment %} {{content.comment}} {% else %} ... {% endif %}<br>
	</div>
	<div class="span4">
		<b>Movements:</b>
		<ul>
		{% for movement in movements %}
			<li><i class="icon-file"></i><a href="/movements/{{movement.id}}">{{movement}}</a></li>
		{% endfor %}
		</ul>
	</div>
</div>
<br>
<div class="row-fluid">
	{% for tag in content.tags.all %}
	{{randomLabel}}
		<span class="{{tag|randomLabel}}">{{tag}}</span>
	{% endfor %}
</div>

<div class="row-fluid" id="submit-row">
<table>
	<tr> <td> <form method="post" name="download-piece" action="download/">{% csrf_token %}
<button type="submit" value="Download" class="btn btn-primary"><i class="icon-download-alt"></i> Download </button></form> </td>
	<td> <form method="post" name="save-piece" action="save/">{% csrf_token %} <button type="submit" value="Save" class="btn btn-primary"><i class="icon-download"></i> Save </button></form>
	</tr>
</table>
</div> 

</div>

{% endblock %}